import * as meraki from "@pulumi/meraki";

export = async () => {
    const orgs = await meraki.getOrganizations();
    const org = orgs.items[0];
    const networks = await meraki.getNetworks({
        organizationId: org.id
    });

    const network = networks.items[0];

    new meraki.networks.ApplianceSecurityMalware("example", {
        allowedFiles: [{
            comment: "allow ZIP file",
            sha256: "e82c5f7d75004727e1f3b94426b9a11c8bc4c312a9170ac9a73abace40aef503"
        }],
        allowedUrls: [{
            comment: "allow help.com.au",
            url: "help.com.au"
        }, {
            comment: "allow google.com",
            url: "google.com"
        }],
        mode: "enabled",
        networkId: network.id
    });

    return {
        networks: networks,
    }
};